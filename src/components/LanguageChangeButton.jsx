'use client';

import { useLocale } from 'next-intl';
import { usePathname, useRouter } from '../i18n/navigation';

export default function LanguageChangeButton({ isLight = false }) {
    const currentLocale = useLocale();
    const pathname = usePathname();
    const router = useRouter();

    const toggleLocale = () => {
        const newLocale = currentLocale === 'en' ? 'bg' : 'en';
        router.replace(pathname, { locale: newLocale });
        router.refresh();
    };

    return (
        <button
            onClick={toggleLocale}
            aria-label="Change language"
            className={`p-1 rounded hover:bg-gray-100 ${isLight ? 'text-white' : 'text-black'}`}
            title={currentLocale === 'en' ? 'Български' : 'English'}
        >
            <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="Planetscale--Streamline-Svg-Logos" height="24" width="24">
                <desc>
                    Planetscale Streamline Icon: https://streamlinehq.com
                </desc>
                <path d="M23.75 12.00405C23.7478 18.490175 18.490175 23.7478 12.00405 23.75L23.75 12.00405ZM12 0.25c4.77135 0 8.87845 2.843925 10.718675 6.929125L7.179125 22.718675c-0.6668 -0.300375 -1.3006 -0.66115 -1.8943 -1.0754L14.9281 12H12L3.6915 20.308475C1.5651675 18.18215 0.25 15.24465 0.25 12 0.25 5.51065 5.51065 0.25 12 0.25Z" strokeWidth="0.25"></path>
            </svg>
        </button>
    );
}